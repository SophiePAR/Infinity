<div class="container justify-content-center">
  <h1>Bienvenue sur votre profile <%= @user.first_name %> <%= @user.last_name %></h1>
  <p>Find me in app/views/users/show.html.erb</p>
  <div class="profil">
    <div class="left-profil">
      <div class="user-info">
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eius quod non error eum nostrum? Id sequi modi voluptatem, harum optio expedita illo quo facere, neque at nam delectus nesciunt aut.</p>
      </div>
      <div class="tombstone-cards">
        <h2>Mes sépultures</h2>
        <div class="cards">
          <% @tombstones.each do |tombstone| %>
            <div class="card-category">
              <%= link_to tombstone.first_name, tombstone_path(tombstone), class: "name" %><%= link_to tombstone.last_name , tombstone_path(tombstone),class:"name" %>

              <%# <% if tombstone.photo.key?%>
              <%# <%= cl_image_tag tombstone.photo.key, height: 300, width: 200, crop: :fill %>
              <%# <% else %>
                <%# <%= image_tag asset_path('tombstone.png'), height: 300, width: 400 %>
              <%# <% end  %>

                <% if tombstone.orders.where(:progress => [:pending, :accepted, :validated, :finished]).count == 0 %>
                  <div class="batg", style="visibility:hiden"></div>
                <% else %>
                  <div class="batg">
                    <% if tombstone.orders.where(:progress => :accepted).count == 0 %>
                      <p data-controller="tooltip" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title=" Vous avez <%= tombstone.orders.where(:progress => [:pending, :accepted, :validated]).count  %> notifications:" class="badge"><%= tombstone.orders.where(:progress => [:pending, :accepted, :validated]).count %></p>
                    <% elsif tombstone.orders.where(:progress => :accepted).count != 0 %>
                      <p data-controller="tooltip" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title=" Vous avez <%= tombstone.orders.where(:progress => [:pending, :accepted, :validated]).count  %> notifications:" class="badge-orange"><%= tombstone.orders.where(:progress => [:pending, :accepted, :validated]).count %></p>
                    <% end %>
                  </div>
                <% end %>

            </div>
          <% end %>
          <p class="add-tomb"><%= link_to "Ajouter une sépulture", new_tombstone_path, class: "btn btn-primary" %></p>
        </div>
      </div>
    </div>
    <div class="right-profil">
    <div class="btn-mission" style="display: flex" >
        <%= link_to "Rechercher des missions", provider_orders_path , class: "btn btn-primary provider-show" %>
        <%= link_to "Voir mes missions", my_missions_path , class: "btn btn-primary btn-mymission" %>
    </div>
    <br>
    <br>
      <div class="geo-map" >
      <div style="width: 100%; height: 600px;"
        data-controller="map"
        data-map-markers-value="<%= @markers.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
      </div>
    </div>
  </div>
</div>
